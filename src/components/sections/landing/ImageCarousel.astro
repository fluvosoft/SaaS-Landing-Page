---
import { Image } from "astro:assets";
import carousel1 from "@images/carosel/carosel_1.jpeg";
import carousel2 from "@images/carosel/carosel_2.jpeg";
import carousel3 from "@images/carosel/carosel_3.jpeg";
import carousel4 from "@images/carosel/carosel_4.jpeg";
import carousel5 from "@images/carosel/carosel_5.jpeg";

// Lumiro Theme images - using public paths
const lumiroTheme1Path = "/carosel/lumiro _theme1.jpeg";
const lumiroTheme2Path = "/carosel/lumiro_theme2.jpeg";
const lumiroTheme3Path = "/carosel/lumiro_theme3.jpeg";
const lumiroTheme4Path = "/carosel/lumiro_theme4.jpeg";
const lumiroTheme5Path = "/carosel/lumiro_theme5.jpeg";
const lumiroTheme6Path = "/carosel/lumiro_theme6.jpeg";
const lumiroTheme7Path = "/carosel/lumiro_theme7.jpeg";
const lumiroTheme8Path = "/carosel/lumiro_theme8.jpeg";
const lumiroTheme9Path = "/carosel/lumiro_theme9.jpeg";
const lumiroTheme10Path = "/carosel/lumiro_theme10.jpeg";
const lumiroTheme11Path = "/carosel/lumiro_theme11.jpeg";
const lumiroTheme12Path = "/carosel/lumiro_theme12.jpeg";

// Map images to their URLs
const lumiroThemes = [
  { path: lumiroTheme1Path, url: "https://lumirotheme1.vercel.app/", alt: "Lumiro Theme 1 - Modern business landing page template" },
  { path: lumiroTheme2Path, url: "https://lumirotheme2.vercel.app/", alt: "Lumiro Theme 2 - Restaurant landing page template" },
  { path: lumiroTheme3Path, url: "https://lumirotheme3.vercel.app/", alt: "Lumiro Theme 3 - Educational platform landing page template" },
  { path: lumiroTheme4Path, url: "https://lumirotheme4.vercel.app/", alt: "Lumiro Theme 4 - Marketing asset management landing page template" },
  { path: lumiroTheme5Path, url: "https://lumirotheme5.vercel.app/", alt: "Lumiro Theme 5 - Startup landing page template" },
  { path: lumiroTheme6Path, url: "https://lumirotheme6.vercel.app/", alt: "Lumiro Theme 6 - Shadcn landing page template" },
  { path: lumiroTheme7Path, url: "https://lumirotheme7.vercel.app/", alt: "Lumiro Theme 7 - Modern landing page template" },
  { path: lumiroTheme8Path, url: "https://lumirotheme8.vercel.app/", alt: "Lumiro Theme 8 - Modern landing page template" },
  { path: lumiroTheme9Path, url: "https://lumirotheme9.vercel.app/", alt: "Lumiro Theme 9 - Modern landing page template" },
  { path: lumiroTheme10Path, url: "https://lumirotheme10.vercel.app/", alt: "Lumiro Theme 10 - Modern landing page template" },
  { path: lumiroTheme11Path, url: "https://lumirotheme11.vercel.app/", alt: "Lumiro Theme 11 - Modern landing page template" },
  { path: lumiroTheme12Path, url: "https://lumirotheme12.vercel.app/", alt: "Lumiro Theme 12 - Modern landing page template" },
];

const carouselImages: Array<any> = [carousel1, carousel2, carousel3, carousel4, carousel5, ...lumiroThemes.map(t => t.path)];
const duplicatedImages = [...carouselImages, ...carouselImages];

// Helper function to get theme info by path
function getThemeInfo(path: string) {
  return lumiroThemes.find(t => t.path === path);
}
---

<section
  class="mx-auto max-w-[85rem] overflow-hidden px-4 py-12 sm:px-6 sm:py-14 lg:px-8 lg:py-16 2xl:max-w-full"
  aria-label="Image carousel"
>
  <div class="carousel-container">
    <!-- Neutral edge fades (no color tint) -->
    <div class="carousel-fade-left" aria-hidden="true"></div>
    <div class="carousel-fade-right" aria-hidden="true"></div>
    <div class="carousel-track" aria-live="polite">
      {duplicatedImages.map((image, index) => {
        const imageIndex = index % carouselImages.length;
        const isStringPath = typeof image === 'string';
        const themeInfo = isStringPath ? getThemeInfo(image) : null;
        const hasLink = themeInfo !== null;
        
        return (
          <div class="carousel-item">
            {hasLink ? (
              <a
                href={themeInfo.url}
                target="_blank"
                rel="noopener noreferrer"
                class="block h-full w-full"
              >
                <img
                  src={image}
                  alt={themeInfo.alt}
                  class="h-full w-full object-cover transition-transform duration-500 ease-out"
                  draggable="false"
                />
              </a>
            ) : (
              <>
                {isStringPath ? (
                  <img
                    src={image}
                    alt={`Carousel image ${imageIndex + 1}`}
                    class="h-full w-full object-cover transition-transform duration-500 ease-out"
                    draggable="false"
                  />
                ) : (
                  <Image
                    src={image}
                    alt={`Carousel image ${imageIndex + 1}`}
                    class="h-full w-full object-cover transition-transform duration-500 ease-out"
                    draggable="false"
                  />
                )}
              </>
            )}
          </div>
        );
      })}
    </div>
  </div>
</section>

<style>
  .carousel-container {
    width: 100%;
    overflow: hidden;
    position: relative;
  }

  .carousel-track {
    display: flex;
    gap: 1.25rem;
    animation: scroll 35s linear infinite;
    will-change: transform;
    padding: 0.5rem 0;
  }

  .carousel-track:hover,
  .carousel-track:focus-within {
    animation-play-state: paused;
  }

  .carousel-item {
    flex-shrink: 0;
    width: 280px;
    height: 188px;
    border-radius: 1rem;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, 0.06);
    box-shadow:
      0 1px 3px 0 rgb(0 0 0 / 0.06),
      0 4px 12px -2px rgb(0 0 0 / 0.08);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }

  .carousel-item:hover {
    transform: translateY(-4px);
    box-shadow:
      0 4px 12px -2px rgb(0 0 0 / 0.1),
      0 12px 24px -4px rgb(0 0 0 / 0.12);
  }

  .carousel-item:hover img {
    transform: scale(1.03);
  }

  @media (min-width: 640px) {
    .carousel-item {
      width: 360px;
      height: 240px;
      border-radius: 1.25rem;
    }
  }

  @media (min-width: 1024px) {
    .carousel-item {
      width: 440px;
      height: 280px;
      border-radius: 1.5rem;
    }
  }

  .carousel-fade-left,
  .carousel-fade-right {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 120px;
    pointer-events: none;
    z-index: 10;
  }

  .carousel-fade-left {
    left: 0;
    background: linear-gradient(to right, oklch(0.97 0 0 / 0.95), transparent);
  }

  .carousel-fade-right {
    right: 0;
    background: linear-gradient(to left, oklch(0.97 0 0 / 0.95), transparent);
  }

  :global(.dark) .carousel-fade-left {
    background: linear-gradient(to right, oklch(0.145 0 0 / 0.95), transparent);
  }

  :global(.dark) .carousel-fade-right {
    background: linear-gradient(to left, oklch(0.145 0 0 / 0.95), transparent);
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
</style>
