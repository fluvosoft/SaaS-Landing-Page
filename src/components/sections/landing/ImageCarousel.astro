---
import { Image } from "astro:assets";
import carousel1 from "@images/carosel/carosel_1.jpeg";
import carousel2 from "@images/carosel/carosel_2.jpeg";
import carousel3 from "@images/carosel/carosel_3.jpeg";
import carousel4 from "@images/carosel/carosel_4.jpeg";
import carousel5 from "@images/carosel/carosel_5.jpeg";

const carouselImages = [carousel1, carousel2, carousel3, carousel4, carousel5];
const duplicatedImages = [...carouselImages, ...carouselImages];
---

<section
  class="mx-auto max-w-[85rem] overflow-hidden px-4 py-12 sm:px-6 sm:py-14 lg:px-8 lg:py-16 2xl:max-w-full"
  aria-label="Image carousel"
>
  <div class="carousel-container">
    <!-- Neutral edge fades (no color tint) -->
    <div class="carousel-fade-left" aria-hidden="true"></div>
    <div class="carousel-fade-right" aria-hidden="true"></div>
    <div class="carousel-track" aria-live="polite">
      {duplicatedImages.map((image, index) => (
        <div class="carousel-item">
          <Image
            src={image}
            alt={`Carousel image ${(index % carouselImages.length) + 1}`}
            class="h-full w-full object-cover transition-transform duration-500 ease-out"
            draggable="false"
          />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .carousel-container {
    width: 100%;
    overflow: hidden;
    position: relative;
  }

  .carousel-track {
    display: flex;
    gap: 1.25rem;
    animation: scroll 35s linear infinite;
    will-change: transform;
    padding: 0.5rem 0;
  }

  .carousel-track:hover,
  .carousel-track:focus-within {
    animation-play-state: paused;
  }

  .carousel-item {
    flex-shrink: 0;
    width: 280px;
    height: 188px;
    border-radius: 1rem;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, 0.06);
    box-shadow:
      0 1px 3px 0 rgb(0 0 0 / 0.06),
      0 4px 12px -2px rgb(0 0 0 / 0.08);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }

  .carousel-item:hover {
    transform: translateY(-4px);
    box-shadow:
      0 4px 12px -2px rgb(0 0 0 / 0.1),
      0 12px 24px -4px rgb(0 0 0 / 0.12);
  }

  .carousel-item:hover img {
    transform: scale(1.03);
  }

  @media (min-width: 640px) {
    .carousel-item {
      width: 360px;
      height: 240px;
      border-radius: 1.25rem;
    }
  }

  @media (min-width: 1024px) {
    .carousel-item {
      width: 440px;
      height: 280px;
      border-radius: 1.5rem;
    }
  }

  .carousel-fade-left,
  .carousel-fade-right {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 120px;
    pointer-events: none;
    z-index: 10;
  }

  .carousel-fade-left {
    left: 0;
    background: linear-gradient(to right, oklch(0.97 0 0 / 0.95), transparent);
  }

  .carousel-fade-right {
    right: 0;
    background: linear-gradient(to left, oklch(0.97 0 0 / 0.95), transparent);
  }

  :global(.dark) .carousel-fade-left {
    background: linear-gradient(to right, oklch(0.145 0 0 / 0.95), transparent);
  }

  :global(.dark) .carousel-fade-right {
    background: linear-gradient(to left, oklch(0.145 0 0 / 0.95), transparent);
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
</style>
