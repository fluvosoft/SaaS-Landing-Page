---
const { title, btnId, btnTitle, url } = Astro.props;

interface Props {
  title?: string;
  btnId: string;
  btnTitle: string;
  url: string;
}
---

<astro-banner btnId={btnId}>
  <div
    class="fixed bottom-0 start-1/2 z-50 mx-auto w-full -translate-x-1/2 px-4 pb-4 sm:px-6 sm:pb-6 md:max-w-5xl lg:max-w-6xl xl:max-w-7xl"
    role="region"
    aria-label="Announcement"
  >
    <div
      class="relative overflow-hidden rounded-2xl border border-white/10 bg-[#171717] bg-[url('/banner-pattern.svg')] bg-cover bg-center bg-no-repeat py-4 shadow-xl ring-1 ring-black/20 sm:rounded-3xl sm:py-5 sm:px-6"
    >
      <div class="flex items-center justify-between gap-4">
        <!-- Left: title or spacer -->
        <div class="min-w-0 flex-1">
          {title && (
            <p class="text-sm font-medium text-neutral-100 sm:text-base">
              {title}
            </p>
          )}
        </div>
        <!-- Center: CTA button -->
        <a
          class="group shrink-0 inline-flex items-center gap-x-2 rounded-2xl border-2 border-orange-500 bg-orange-500 px-4 py-2.5 text-sm font-semibold text-white transition-all duration-300 hover:scale-105 hover:border-orange-600 hover:bg-orange-600 hover:shadow-lg hover:shadow-orange-500/25 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-offset-2 focus:ring-offset-[#171717] disabled:pointer-events-none disabled:opacity-50"
          href={url}
        >
          {btnTitle}
          <svg
            class="size-4 shrink-0 transition duration-300 group-hover:translate-x-0.5"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="m9 18 6-6-6-6" />
          </svg>
        </a>
        <!-- Right: close button -->
        <div class="flex flex-1 justify-end">
          <button
            type="button"
            class="inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-full border border-transparent bg-white text-black transition-all duration-300 hover:scale-105 hover:bg-neutral-100 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-[#171717] disabled:pointer-events-none disabled:opacity-50"
            id={btnId}
            aria-label="Dismiss banner"
          >
            <svg
              class="size-5 shrink-0"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
            >
              <path d="M18 6 6 18" />
              <path d="m6 6 12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</astro-banner>
<script>
  class AstroBanner extends HTMLElement {
    connectedCallback() {
      const btnId = this.getAttribute("btnId");
      const button = this.querySelector(`#${btnId}`);
      if (button != null) {
        button.addEventListener("click", () => this.remove());
      }
    }
  }

  customElements.define("astro-banner", AstroBanner);
</script>
